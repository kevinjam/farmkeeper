(()=>{var e={};e.id=8246,e.ids=[8246],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},45324:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>h,pages:()=>c,routeModule:()=>g,tree:()=>l});var a=t(50482),s=t(69108),i=t(62563),o=t.n(i),n=t(68300),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(r,d);let l=["",{children:["[farmId]",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,40547)),"/Users/kevin/Documents/projects/frontend/farmkeeper/frontend/src/app/[farmId]/dashboard/page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,66371)),"/Users/kevin/Documents/projects/frontend/farmkeeper/frontend/src/app/[farmId]/dashboard/layout.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,21342)),"/Users/kevin/Documents/projects/frontend/farmkeeper/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,69361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/kevin/Documents/projects/frontend/farmkeeper/frontend/src/app/[farmId]/dashboard/page.tsx"],h="/[farmId]/dashboard/page",m={require:t,loadChunk:()=>Promise.resolve()},g=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/[farmId]/dashboard/page",pathname:"/[farmId]/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},98815:(e,r,t)=>{Promise.resolve().then(t.bind(t,10986))},10986:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>x});var a=t(95344),s=t(3729),i=t(56506),o=t(8428);let n=({title:e,value:r,change:t,icon:s,positive:i=!0,loading:o=!1})=>a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e}),o?a.jsx("div",{className:"mt-1 h-6 bg-gray-200 dark:bg-gray-700 rounded animate-pulse w-16"}):a.jsx("h3",{className:"text-xl font-bold mt-1",children:r}),(0,a.jsxs)("p",{className:`text-xs mt-2 flex items-center ${i?"text-green-600":"text-red-600"}`,children:[i?a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M12 7a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0V8.414l-4.293 4.293a1 1 0 01-1.414 0L8 10.414l-4.293 4.293a1 1 0 01-1.414-1.414l5-5a1 1 0 011.414 0L11 10.586l3.293-3.293A1 1 0 0112 7z",clipRule:"evenodd"})}):a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M12 13a1 1 0 110 2H7a1 1 0 01-1-1v-5a1 1 0 112 0v2.586l4.293-4.293a1 1 0 011.414 0L16 9.586l4.293-4.293a1 1 0 011.414 1.414l-5 5a1 1 0 01-1.414 0L13 9.414l-3.293 3.293A1 1 0 0112 13z",clipRule:"evenodd"})}),t," from last month"]})]}),a.jsx("div",{className:"bg-primary-100 dark:bg-primary-900 p-2 rounded-md",children:s})]})}),d=({title:e,description:r,dueDate:t,priority:s})=>(0,a.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 last:border-0",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("h4",{className:"font-medium",children:e}),a.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${{high:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",medium:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",low:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}[s]}`,children:s.charAt(0).toUpperCase()+s.slice(1)})]}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:r}),(0,a.jsxs)("div",{className:"flex justify-between mt-2",children:[(0,a.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Due: ",t]}),a.jsx("button",{className:"text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 text-xs",children:"Mark as complete"})]})]}),l=({activity:e,time:r,user:t,icon:s})=>(0,a.jsxs)("div",{className:"flex items-start p-3 border-b border-gray-200 dark:border-gray-700 last:border-0",children:[a.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 p-2 rounded-md mr-3",children:s}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm",children:e}),(0,a.jsxs)("div",{className:"flex justify-between mt-1",children:[(0,a.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["by ",t]}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:r})]})]})]}),c=e=>{let r="h-5 w-5 text-gray-600 dark:text-gray-300";switch(e){case"livestock_added":case"livestock_updated":return a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})});case"egg_collection":return a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})});case"egg_sale":case"income_recorded":return a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});case"crop_added":case"crop_updated":case"crop_harvested":return a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})});case"task_created":case"task_completed":return a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})});case"expense_added":return a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})});default:return a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}},h=e=>{let r=new Date(e),t=new Date,a=Math.floor((t.getTime()-r.getTime())/1e3);if(a<60)return"Just now";if(a<3600){let e=Math.floor(a/60);return`${e} minute${e>1?"s":""} ago`}if(a<86400){let e=Math.floor(a/3600);return`${e} hour${e>1?"s":""} ago`}{if(!(a<604800))return r.toLocaleDateString("en-US",{month:"short",day:"numeric",year:r.getFullYear()!==t.getFullYear()?"numeric":void 0});let e=Math.floor(a/86400);return`${e} day${e>1?"s":""} ago`}},m=()=>{let[e,r]=(0,s.useState)({temp:"26\xb0C",condition:"Partly Cloudy",humidity:"65%",wind:"12 km/h"}),[t,i]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{setTimeout(()=>{i(!1)},1e3)},[]),t)?(0,a.jsxs)("div",{className:"bg-gray-200 dark:bg-gray-700 animate-pulse p-4 rounded-lg shadow",children:[a.jsx("div",{className:"h-6 bg-gray-300 dark:bg-gray-600 rounded w-1/2 mb-2"}),a.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-1/3 mb-4"}),a.jsx("div",{className:"h-8 bg-gray-300 dark:bg-gray-600 rounded w-1/4 mb-2"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[a.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded"}),a.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded"})]})]}):(0,a.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-700 text-white p-4 rounded-lg shadow",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-bold text-lg",children:"Today's Weather"}),a.jsx("p",{className:"text-sm opacity-90",children:"Kampala, Uganda"})]}),a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"})})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("h4",{className:"text-2xl font-bold",children:e.temp}),a.jsx("p",{children:e.condition})]}),(0,a.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs opacity-80",children:"Humidity"}),a.jsx("p",{className:"text-sm",children:e.humidity})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs opacity-80",children:"Wind"}),a.jsx("p",{className:"text-sm",children:e.wind})]})]})]})]})},g=({href:e,icon:r,label:t})=>(0,a.jsxs)(i.default,{href:e,className:"group flex flex-col items-center justify-center p-4 bg-white dark:bg-gray-800 rounded-lg shadow-md hover:shadow-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-300",children:[a.jsx("div",{className:"p-3 bg-primary-100 dark:bg-primary-900 rounded-full text-primary-600 dark:text-primary-300 group-hover:scale-110 transition-transform duration-300",children:r}),a.jsx("span",{className:"mt-2 text-sm font-medium text-gray-700 dark:text-gray-200",children:t})]});function x({params:e}){let{farmId:r}=e,t=(0,o.useRouter)(),[x,u]=(0,s.useState)(!0),[p,v]=(0,s.useState)(null),[w,y]=(0,s.useState)(!0),[j,k]=(0,s.useState)(0),[f,b]=(0,s.useState)(0),[N,L]=(0,s.useState)(null),[M,C]=(0,s.useState)(!0),[S,$]=(0,s.useState)(null),[_,P]=(0,s.useState)(!0),W=(e,r="UGX")=>0===e?`${r} 0`:e>=1e6?`${r} ${(e/1e6).toFixed(1)}M`:e>=1e3?`${r} ${(e/1e3).toFixed(1)}K`:`${r} ${e.toLocaleString()}`,[B,z]=(0,s.useState)([{title:"Total Livestock",value:"0",change:"+12.5%",positive:!0,loading:!0,icon:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-primary-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})},{title:"Eggs Today",value:"0",change:"+5.2%",positive:!0,loading:!0,icon:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-primary-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 713.138-3.138z"})})},{title:"Net Profit",value:"UGX 0",change:"+0.0%",positive:!0,loading:!0,icon:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-primary-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},{title:"Feed Stock",value:"0%",change:"+0.0%",positive:!0,loading:!0,icon:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-primary-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}]),F=[{label:"Add Livestock",href:`/${r}/dashboard/livestock/add`,icon:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})},{label:"Record Eggs",href:`/${r}/dashboard/eggs/record`,icon:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})},{label:"Add Expense",href:`/${r}/dashboard/finances/expense`,icon:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},{label:"Record Sale",href:`/${r}/dashboard/finances/income`,icon:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}],[U,E]=(0,s.useState)([]),[G,H]=(0,s.useState)(!0),[A,D]=(0,s.useState)(null),[V,T]=(0,s.useState)([]),[q,I]=(0,s.useState)(!0),[R,X]=(0,s.useState)(null),[Y,K]=(0,s.useState)({temp:"26\xb0C",condition:"Partly Cloudy",humidity:"65%",wind:"12 km/h"});(0,s.useEffect)(()=>{(async()=>{try{P(!0);let e=await fetch("/api/feedstock");if(e.ok){let r=await e.json();$(r.data)}else console.error("Failed to fetch feed stock data")}catch(e){console.error("Error fetching feed stock data:",e)}finally{P(!1)}})()},[]),(0,s.useEffect)(()=>{z([{title:"Total Livestock",value:j.toString(),change:"+12.5%",positive:!0,loading:w,icon:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-primary-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})},{title:"Eggs Today",value:f.toString(),change:"+5.2%",positive:!0,loading:w,icon:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-primary-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 714.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 713.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 713.138-3.138z"})})},{title:"Net Profit",value:N?W(N.summary.netProfit,"UGX"):"UGX 0",change:N?`${N.growth.profitGrowth>=0?"+":""}${N.growth.profitGrowth.toFixed(1)}%`:"+0.0%",positive:!N||N.growth.profitGrowth>=0,loading:M,icon:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-primary-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},{title:"Feed Stock",value:S?`${S.stockPercentage}%`:"0%",change:S&&S.totalItems>0?`${S.lowStockItems.length>0?"-":"+"}${Math.abs(S.stockPercentage-75).toFixed(1)}%`:"+0.0%",positive:!S||0===S.lowStockItems.length,loading:_,icon:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-primary-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}])},[j,f,w,N,M,S,_]);let J=async()=>{try{y(!0);let[e,r]=await Promise.all([fetch("/api/livestock/total",{credentials:"include"}),fetch("/api/eggs/today",{credentials:"include"})]);if(e.ok){let r=await e.json();k(r.totalLivestock||0)}if(r.ok){let e=await r.json();b(e.eggsCollected||0)}}catch(e){console.error("Error fetching dashboard stats:",e)}finally{y(!1)}},O=async()=>{try{C(!0);let e=await fetch("/api/finances/analytics");if(e.ok){let r=await e.json();L(r.data)}else console.error("Failed to fetch financial analytics")}catch(e){console.error("Error fetching financial analytics:",e)}finally{C(!1)}},Q=async()=>{try{H(!0),D(null);let e=await fetch("/api/tasks/upcoming?limit=5",{credentials:"include"});if(e.ok){let r=await e.json();E(r.data||[])}else{let r=await e.json().catch(()=>({error:"Failed to fetch tasks"}));D(r.error||"Failed to fetch tasks")}}catch(e){console.error("Error fetching upcoming tasks:",e),D("Failed to fetch tasks")}finally{H(!1)}},Z=async()=>{try{I(!0),X(null);let e=await fetch("/api/activity/recent?limit=5",{credentials:"include"});if(e.ok){let r=await e.json();T(r.data||[])}else{let r=await e.json().catch(()=>({error:"Failed to fetch activities"}));X(r.error||"Failed to fetch activities")}}catch(e){console.error("Error fetching recent activities:",e),X("Failed to fetch activities")}finally{I(!1)}};return((0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/auth/status",{credentials:"include"}),r=await e.json();if(!e.ok||!r.isSignedUp){t.replace("/auth/register");return}await Promise.all([J(),Q(),Z(),O()]),u(!1)}catch(e){v("Failed to verify user status. Please try again."),u(!1)}})()},[t]),(0,s.useEffect)(()=>{z(e=>[{...e[0],value:j.toString(),loading:w},{...e[1],value:f.toString(),loading:w},{...e[2],value:N?W(N.summary.netProfit,"UGX"):"UGX 0",change:N?`${N.growth.profitGrowth>=0?"+":""}${N.growth.profitGrowth.toFixed(1)}%`:"+0.0%",positive:!N||N.growth.profitGrowth>=0,loading:M},e[3]])},[j,f,w,N,M]),x)?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 animate-pulse",children:[a.jsx("div",{className:"h-6 bg-gray-300 dark:bg-gray-600 rounded w-1/2 mb-2"}),a.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-3/4"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[void 0,void 0,void 0,void 0].map((e,r)=>(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 animate-pulse",children:[a.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-1/2 mb-2"}),a.jsx("div",{className:"h-6 bg-gray-300 dark:bg-gray-600 rounded w-1/4 mb-2"}),a.jsx("div",{className:"h-3 bg-gray-300 dark:bg-gray-600 rounded w-1/3"})]},r))})]}):p?a.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:a.jsx("span",{className:"block sm:inline",children:p})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Welcome to your Farm Dashboard"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Here's what's happening on your farm today."})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:B.map((e,r)=>a.jsx(n,{title:e.title,value:e.value,change:e.change,positive:e.positive,loading:e.loading,icon:e.icon},r))}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[(0,a.jsxs)("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-medium",children:"Upcoming Tasks"}),a.jsx(i.default,{href:`/${r}/dashboard/tasks`,className:"text-sm text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300",children:"View all"})]}),a.jsx("div",{children:G?a.jsx("div",{className:"p-4 space-y-4",children:[void 0,void 0,void 0].map((e,r)=>(0,a.jsxs)("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-2"}),a.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2 mb-2"}),a.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/4"})]},r))}):A?a.jsx("div",{className:"p-4 text-center text-red-600 dark:text-red-400",children:A}):0===U.length?(0,a.jsxs)("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mx-auto mb-4 text-gray-300 dark:text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),a.jsx("p",{className:"text-lg font-medium mb-2",children:"No upcoming tasks"}),a.jsx("p",{className:"text-sm",children:"You're all caught up! Create a new task to get started."})]}):U.map((e,r)=>a.jsx(d,{title:e.title,description:e.description,dueDate:new Date(e.dueDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),priority:e.priority},e._id||r))}),a.jsx("div",{className:"p-4",children:a.jsx("button",{className:"w-full btn bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200",children:"Add New Task"})})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx(m,{}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[a.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:a.jsx("h3",{className:"text-lg font-medium",children:"Quick Actions"})}),a.jsx("div",{className:"p-4 grid grid-cols-2 gap-4",children:F.map(e=>a.jsx(g,{href:e.href,icon:e.icon,label:e.label},e.label))})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[(0,a.jsxs)("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-medium",children:"Recent Activity"}),a.jsx(i.default,{href:`/${r}/dashboard/activity`,className:"text-sm text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300",children:"View all"})]}),a.jsx("div",{children:q?a.jsx("div",{className:"p-4 space-y-4",children:[void 0,void 0,void 0].map((e,r)=>(0,a.jsxs)("div",{className:"flex items-start animate-pulse",children:[a.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-md mr-3"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-2"}),a.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]})]},r))}):R?a.jsx("div",{className:"p-4 text-center text-red-600 dark:text-red-400",children:R}):0===V.length?(0,a.jsxs)("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mx-auto mb-4 text-gray-300 dark:text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),a.jsx("p",{className:"text-lg font-medium mb-2",children:"No recent activity"}),a.jsx("p",{className:"text-sm",children:"Activity will appear here as you use your farm management system."})]}):V.map((e,r)=>a.jsx(l,{activity:e.description,time:h(e.createdAt),user:e.user?.name||"Unknown User",icon:c(e.activityType)},e._id||r))})]})]}),a.jsx("div",{className:"bg-primary-600 text-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[(0,a.jsxs)("div",{className:"mb-4 md:mb-0",children:[a.jsx("h3",{className:"text-xl font-bold",children:"Ready to optimize your farm operations?"}),a.jsx("p",{className:"mt-1",children:"Complete your farm profile to get personalized recommendations."})]}),a.jsx(i.default,{href:`/${r}/dashboard/settings/profile`,className:"btn bg-white text-primary-700 hover:bg-gray-100",children:"Complete Profile"})]})})]})}},40547:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>i,__esModule:()=>s,default:()=>o});let a=(0,t(86843).createProxy)(String.raw`/Users/kevin/Documents/projects/frontend/farmkeeper/frontend/src/app/[farmId]/dashboard/page.tsx`),{__esModule:s,$$typeof:i}=a,o=a.default}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[1638,7848,1476,9822],()=>t(45324));module.exports=a})();